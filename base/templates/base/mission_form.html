{% extends "base/__base.html" %}
{% load staticfiles i18n leaflet_tags geojson_tags %}

{% block title %}{{ block.super }} | {% trans 'Mission' %}{% endblock %}

{% block css-scripts %}
    {% leaflet_js %}
    {% leaflet_css %}

    <style>
        .leaflet-container {  /* all maps */
            width:  1200px;
            height: 600px;
        }

    </style>
{% endblock %}

{% block content %}
    <ul>
        <li>{{ address }}</li>
        <li>{{ lat }}</li>
        <li>{{ long }}</li>
        <li>{{ raw }}</li>
    </ul>
    Test: {% leaflet_map "mapid" %}
{% endblock %}

{% block js-scripts %}
    <script type="text/javascript">
        var mymap = L.map('mapid').setView([{{ lat }}, {{ long }}], 18);

        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
            maxZoom: 18,
            id: 'mapbox.streets'
        }).addTo(mymap);

        var marker = L.marker([{{ lat }}, {{ long }}]).addTo(mymap);
        marker.bindPopup("<b>{{ object }}</b><br>{{ object.street }}<br />{{ object.location }}").openPopup();
    </script>
{% endblock %}
